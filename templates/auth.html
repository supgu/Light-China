<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>登录注册 - 点亮中国</title>
    <meta name="description" content="点亮中国旅游平台用户登录注册页面">
    <meta name="keywords" content="登录, 注册, 点亮中国, 旅游平台">
    
    <!-- 样式文件 -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/auth.css') }}">
</head>
<body class="auth-page">
    <!-- 头部导航 -->
    <header class="header">
        <div class="header-content">
            <a href="{{ url_for('main.index') }}" class="logo">🌟 点亮中国</a>
            
            <nav class="main-nav">
                <a href="{{ url_for('main.index') }}">首页</a>
                <a href="{{ url_for('volunteers.volunteer_service') }}">志愿服务</a>
            </nav>
        </div>
    </header>

    <!-- 主要内容 -->
    <main class="auth-main">
        <div class="auth-container">
            <!-- 左侧介绍 -->
            <div class="auth-intro">
                <div class="intro-content">
                    <h1>🌟 点亮中国</h1>
                    <p class="intro-subtitle">发现美好，分享精彩</p>
                    
                    <div class="intro-features">
                        <div class="feature-item">
                            <div class="feature-icon">🗺️</div>
                            <div class="feature-text">
                                <h3>智能地图导览</h3>
                                <p>交互式中国地图，点击城市即可探索当地特色</p>
                            </div>
                        </div>
                        
                        <div class="feature-item">
                            <div class="feature-icon">🤝</div>
                            <div class="feature-text">
                                <h3>志愿服务</h3>
                                <p>为特殊群体提供贴心的旅游陪伴服务</p>
                            </div>
                        </div>
                        
                        <div class="feature-item">
                            <div class="feature-icon">❤️</div>
                            <div class="feature-text">
                                <h3>个性化推荐</h3>
                                <p>根据您的兴趣和需求，推荐最适合的旅行体验</p>
                            </div>
                        </div>
                        
                        <div class="feature-item">
                            <div class="feature-icon">🏆</div>
                            <div class="feature-text">
                                <h3>打卡排行榜</h3>
                                <p>记录您的旅行足迹，与朋友分享精彩时刻</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="intro-stats">
                        <div class="stat-item">
                            <div class="stat-number">10万+</div>
                            <div class="stat-label">注册用户</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">5000+</div>
                            <div class="stat-label">景点收录</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">1000+</div>
                            <div class="stat-label">志愿者</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 右侧登录注册表单 -->
            <div class="auth-forms">
                <div class="form-container">
                    <!-- 表单切换标签 -->
                    <div class="form-tabs">
                        <button class="tab-btn active" data-form="login">登录</button>
                        <button class="tab-btn" data-form="register">注册</button>
                    </div>

                    <!-- 登录表单 -->
                    <div class="form-content" id="loginForm">
                        <div class="form-header">
                            <h2>欢迎回来</h2>
                            <p>登录您的账户，继续精彩旅程</p>
                        </div>
                        
                        <form class="auth-form" id="loginFormSubmit">
                            <div class="form-group">
                                <label>登录方式</label>
                                <div class="login-type-tabs">
                                    <button type="button" class="login-type-btn active" data-type="phone">手机号</button>
                                    <button type="button" class="login-type-btn" data-type="email">邮箱</button>
                                </div>
                            </div>
                            
                            <div class="form-group" id="phoneLoginGroup">
                                <label>手机号</label>
                                <div class="input-group">
                                    <span class="input-prefix">+86</span>
                                    <input type="tel" name="phone" placeholder="请输入手机号" required>
                                </div>
                            </div>
                            
                            <div class="form-group hidden" id="emailLoginGroup">
                                <label>邮箱地址</label>
                                <input type="email" name="email" placeholder="请输入邮箱地址">
                            </div>
                            
                            <div class="form-group">
                                <label>密码</label>
                                <div class="input-group">
                                    <input type="password" name="password" placeholder="请输入密码" required>
                                    <button type="button" class="input-suffix" id="togglePassword">👁️</button>
                                </div>
                            </div>
                            
                            <div class="form-options">
                                <label class="checkbox-label">
                                    <input type="checkbox" name="remember">
                                    <span class="checkmark"></span>
                                    记住我
                                </label>
                                <a href="#" class="forgot-password" id="forgotPasswordLink">忘记密码？</a>
                            </div>
                            
                            <button type="submit" class="btn btn-primary btn-full">登录</button>
                        </form>
                        
                        <div class="form-divider">
                            <span>或</span>
                        </div>
                        
                        <div class="social-login">
                            <button class="social-btn wechat" id="wechatLogin">
                                <span class="social-icon">💬</span>
                                微信登录
                            </button>
                            <button class="social-btn qq" id="qqLogin">
                                <span class="social-icon">🐧</span>
                                QQ登录
                            </button>
                        </div>
                        
                        <div class="form-footer">
                            <p>还没有账户？<a href="#" class="switch-form" data-target="register">立即注册</a></p>
                        </div>
                    </div>

                    <!-- 注册表单 -->
                    <div class="form-content hidden" id="registerForm">
                        <div class="form-header">
                            <h2>加入我们</h2>
                            <p>创建账户，开启您的旅行之旅</p>
                        </div>
                        
                        <form class="auth-form" id="registerFormSubmit">
                            <!-- 第一步：基本信息 -->
                            <div class="register-step active" data-step="1">
                                <div class="step-header">
                                    <h3>基本信息</h3>
                                    <div class="step-indicator">
                                        <span class="step-dot active"></span>
                                        <span class="step-dot"></span>
                                        <span class="step-dot"></span>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label>注册方式</label>
                                    <div class="register-type-tabs">
                                        <button type="button" class="register-type-btn active" data-type="phone">手机号</button>
                                        <button type="button" class="register-type-btn" data-type="email">邮箱</button>
                                    </div>
                                </div>
                                
                                <div class="form-group" id="phoneRegisterGroup">
                                    <label>手机号 *</label>
                                    <div class="input-group">
                                        <span class="input-prefix">+86</span>
                                        <input type="tel" name="phone" placeholder="请输入手机号" required>
                                    </div>
                                </div>
                                
                                <div class="form-group hidden" id="emailRegisterGroup">
                                    <label>邮箱地址 *</label>
                                    <input type="email" name="email" placeholder="请输入邮箱地址">
                                </div>
                                
                                <div class="form-group">
                                    <label>验证码 *</label>
                                    <div class="input-group">
                                        <input type="text" name="verification_code" placeholder="请输入验证码" required>
                                        <button type="button" class="input-suffix" id="sendCodeBtn">发送验证码</button>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label>用户名 *</label>
                                    <input type="text" name="username" placeholder="请输入用户名（2-20个字符）" required>
                                    <div class="input-hint">用户名将作为您的显示名称</div>
                                </div>
                                
                                <div class="form-group">
                                    <label>密码 *</label>
                                    <div class="input-group">
                                        <input type="password" name="password" placeholder="请输入密码（至少6位）" required>
                                        <button type="button" class="input-suffix" id="toggleRegisterPassword">👁️</button>
                                    </div>
                                    <div class="password-strength" id="passwordStrength">
                                        <div class="strength-bar">
                                            <div class="strength-fill"></div>
                                        </div>
                                        <span class="strength-text">密码强度：弱</span>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label>确认密码 *</label>
                                    <input type="password" name="confirm_password" placeholder="请再次输入密码" required>
                                </div>
                            </div>
                            
                            <!-- 第二步：身份选择 -->
                            <div class="register-step" data-step="2">
                                <div class="step-header">
                                    <h3>身份选择</h3>
                                    <div class="step-indicator">
                                        <span class="step-dot completed"></span>
                                        <span class="step-dot active"></span>
                                        <span class="step-dot"></span>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label>您的身份 *</label>
                                    <div class="user-type-options">
                                        <label class="user-type-option">
                                            <input type="radio" name="user_type" value="tourist" checked>
                                            <div class="option-card">
                                                <div class="option-icon">🧳</div>
                                                <h4>普通游客</h4>
                                                <p>探索美好景点，记录旅行足迹</p>
                                                <ul>
                                                    <li>✅ 浏览景点信息</li>
                                                    <li>✅ 收藏喜欢的地点</li>
                                                    <li>✅ 制定旅行计划</li>
                                                    <li>✅ 分享旅行体验</li>
                                                </ul>
                                            </div>
                                        </label>
                                        
                                        <label class="user-type-option">
                                            <input type="radio" name="user_type" value="special_needs">
                                            <div class="option-card">
                                                <div class="option-icon">🤗</div>
                                                <h4>特殊需求用户</h4>
                                                <p>享受专业的志愿服务支持</p>
                                                <ul>
                                                    <li>✅ 申请志愿服务</li>
                                                    <li>✅ 无障碍路线规划</li>
                                                    <li>✅ 专业陪同服务</li>
                                                    <li>✅ 个性化旅行建议</li>
                                                </ul>
                                            </div>
                                        </label>
                                        
                                        <label class="user-type-option">
                                            <input type="radio" name="user_type" value="volunteer">
                                            <div class="option-card">
                                                <div class="option-icon">🤝</div>
                                                <h4>志愿者</h4>
                                                <p>为他人提供帮助和支持</p>
                                                <ul>
                                                    <li>✅ 提供志愿服务</li>
                                                    <li>✅ 获得服务认证</li>
                                                    <li>✅ 参与培训课程</li>
                                                    <li>✅ 建立服务档案</li>
                                                </ul>
                                            </div>
                                        </label>
                                        
                                        <label class="user-type-option">
                                            <input type="radio" name="user_type" value="business">
                                            <div class="option-card">
                                                <div class="option-icon">🏢</div>
                                                <h4>商户/机构</h4>
                                                <p>推广旅游服务和产品</p>
                                                <ul>
                                                    <li>✅ 发布景点信息</li>
                                                    <li>✅ 管理商户页面</li>
                                                    <li>✅ 查看数据统计</li>
                                                    <li>✅ 客户服务管理</li>
                                                </ul>
                                            </div>
                                        </label>
                                    </div>
                                </div>
                                
                                <!-- 特殊需求详情 -->
                                <div class="special-needs-details hidden" id="specialNeedsDetails">
                                    <div class="form-group">
                                        <label>特殊需求类型</label>
                                        <div class="checkbox-group">
                                            <label class="checkbox-label">
                                                <input type="checkbox" name="special_needs_types" value="mobility">
                                                <span class="checkmark"></span>
                                                行动不便
                                            </label>
                                            <label class="checkbox-label">
                                                <input type="checkbox" name="special_needs_types" value="visual">
                                                <span class="checkmark"></span>
                                                视力障碍
                                            </label>
                                            <label class="checkbox-label">
                                                <input type="checkbox" name="special_needs_types" value="hearing">
                                                <span class="checkmark"></span>
                                                听力障碍
                                            </label>
                                            <label class="checkbox-label">
                                                <input type="checkbox" name="special_needs_types" value="elderly">
                                                <span class="checkmark"></span>
                                                老年人
                                            </label>
                                            <label class="checkbox-label">
                                                <input type="checkbox" name="special_needs_types" value="medical">
                                                <span class="checkmark"></span>
                                                医疗需求
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label>详细说明</label>
                                        <textarea name="special_needs_description" rows="3" placeholder="请详细描述您的特殊需求，以便我们为您提供更好的服务"></textarea>
                                    </div>
                                </div>
                                
                                <!-- 志愿者详情 -->
                                <div class="volunteer-details hidden" id="volunteerDetails">
                                    <div class="form-group">
                                        <label>服务类型</label>
                                        <div class="checkbox-group">
                                            <label class="checkbox-label">
                                                <input type="checkbox" name="volunteer_services" value="accessibility">
                                                <span class="checkmark"></span>
                                                无障碍陪同
                                            </label>
                                            <label class="checkbox-label">
                                                <input type="checkbox" name="volunteer_services" value="elderly">
                                                <span class="checkmark"></span>
                                                老年人陪伴
                                            </label>
                                            <label class="checkbox-label">
                                                <input type="checkbox" name="volunteer_services" value="visual">
                                                <span class="checkmark"></span>
                                                视障陪同
                                            </label>
                                            <label class="checkbox-label">
                                                <input type="checkbox" name="volunteer_services" value="hearing">
                                                <span class="checkmark"></span>
                                                听障陪同
                                            </label>
                                            <label class="checkbox-label">
                                                <input type="checkbox" name="volunteer_services" value="medical">
                                                <span class="checkmark"></span>
                                                医疗陪护
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label>相关经验</label>
                                        <textarea name="volunteer_experience" rows="3" placeholder="请简述您的相关经验或专业背景"></textarea>
                                    </div>
                                </div>
                                
                                <!-- 商户详情 -->
                                <div class="business-details hidden" id="businessDetails">
                                    <div class="form-group">
                                        <label>机构名称 *</label>
                                        <input type="text" name="business_name" placeholder="请输入机构或企业名称">
                                    </div>
                                    
                                    <div class="form-group">
                                        <label>机构类型</label>
                                        <select name="business_type">
                                            <option value="">请选择机构类型</option>
                                            <option value="hotel">酒店住宿</option>
                                            <option value="restaurant">餐饮服务</option>
                                            <option value="attraction">景点景区</option>
                                            <option value="transport">交通服务</option>
                                            <option value="travel_agency">旅行社</option>
                                            <option value="other">其他</option>
                                        </select>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label>营业执照号</label>
                                        <input type="text" name="business_license" placeholder="请输入营业执照号（用于认证）">
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 第三步：完善信息 -->
                            <div class="register-step" data-step="3">
                                <div class="step-header">
                                    <h3>完善信息</h3>
                                    <div class="step-indicator">
                                        <span class="step-dot completed"></span>
                                        <span class="step-dot completed"></span>
                                        <span class="step-dot active"></span>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label>真实姓名</label>
                                    <input type="text" name="real_name" placeholder="请输入真实姓名（可选）">
                                    <div class="input-hint">真实姓名仅用于身份验证，不会公开显示</div>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>性别</label>
                                        <select name="gender">
                                            <option value="">请选择</option>
                                            <option value="male">男</option>
                                            <option value="female">女</option>
                                            <option value="other">其他</option>
                                        </select>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label>年龄</label>
                                        <input type="number" name="age" min="1" max="120" placeholder="年龄">
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label>所在城市</label>
                                    <input type="text" name="city" placeholder="请输入所在城市">
                                </div>
                                
                                <div class="form-group">
                                    <label>兴趣标签</label>
                                    <div class="interest-tags">
                                        <label class="tag-option">
                                            <input type="checkbox" name="interests" value="history">
                                            <span class="tag-label">历史文化</span>
                                        </label>
                                        <label class="tag-option">
                                            <input type="checkbox" name="interests" value="nature">
                                            <span class="tag-label">自然风光</span>
                                        </label>
                                        <label class="tag-option">
                                            <input type="checkbox" name="interests" value="food">
                                            <span class="tag-label">美食体验</span>
                                        </label>
                                        <label class="tag-option">
                                            <input type="checkbox" name="interests" value="adventure">
                                            <span class="tag-label">探险刺激</span>
                                        </label>
                                        <label class="tag-option">
                                            <input type="checkbox" name="interests" value="photography">
                                            <span class="tag-label">摄影打卡</span>
                                        </label>
                                        <label class="tag-option">
                                            <input type="checkbox" name="interests" value="family">
                                            <span class="tag-label">亲子游</span>
                                        </label>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" name="agree_terms" required>
                                        <span class="checkmark"></span>
                                        我已阅读并同意 <a href="#" target="_blank">《用户协议》</a> 和 <a href="#" target="_blank">《隐私政策》</a>
                                    </label>
                                </div>
                                
                                <div class="form-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" name="subscribe_newsletter">
                                        <span class="checkmark"></span>
                                        订阅我们的旅行资讯和优惠信息
                                    </label>
                                </div>
                            </div>
                            
                            <!-- 表单导航 -->
                            <div class="form-navigation">
                                <button type="button" class="btn btn-secondary hidden" id="prevStepBtn">上一步</button>
                                <button type="button" class="btn btn-primary" id="nextStepBtn">下一步</button>
                                <button type="submit" class="btn btn-primary hidden" id="submitRegisterBtn">完成注册</button>
                            </div>
                        </form>
                        
                        <div class="form-footer">
                            <p>已有账户？<a href="#" class="switch-form" data-target="login">立即登录</a></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- 忘记密码模态框 -->
    <div id="forgotPasswordModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>找回密码</h3>
                <button class="close-btn" id="closeForgotPasswordModal">×</button>
            </div>
            <div class="modal-body">
                <form id="forgotPasswordForm">
                    <div class="form-group">
                        <label>找回方式</label>
                        <div class="reset-type-tabs">
                            <button type="button" class="reset-type-btn active" data-type="phone">手机号</button>
                            <button type="button" class="reset-type-btn" data-type="email">邮箱</button>
                        </div>
                    </div>
                    
                    <div class="form-group" id="phoneResetGroup">
                        <label>手机号</label>
                        <div class="input-group">
                            <span class="input-prefix">+86</span>
                            <input type="tel" name="phone" placeholder="请输入注册时的手机号" required>
                        </div>
                    </div>
                    
                    <div class="form-group hidden" id="emailResetGroup">
                        <label>邮箱地址</label>
                        <input type="email" name="email" placeholder="请输入注册时的邮箱地址">
                    </div>
                    
                    <div class="form-group">
                        <label>验证码</label>
                        <div class="input-group">
                            <input type="text" name="verification_code" placeholder="请输入验证码" required>
                            <button type="button" class="input-suffix" id="sendResetCodeBtn">发送验证码</button>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>新密码</label>
                        <input type="password" name="new_password" placeholder="请输入新密码" required>
                    </div>
                    
                    <div class="form-group">
                        <label>确认新密码</label>
                        <input type="password" name="confirm_new_password" placeholder="请再次输入新密码" required>
                    </div>
                    
                    <button type="submit" class="btn btn-primary btn-full">重置密码</button>
                </form>
            </div>
        </div>
    </div>

    <!-- 微信登录二维码模态框 -->
    <div id="wechatLoginModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>微信登录</h3>
                <button class="close-btn" id="closeWechatLoginModal">×</button>
            </div>
            <div class="modal-body">
                <div class="wechat-qr-container">
                    <div class="qr-code" id="wechatQRCode">
                        <!-- 二维码将在这里生成 -->
                        <div class="qr-placeholder">
                            <div class="loading-spinner"></div>
                            <p>正在生成二维码...</p>
                        </div>
                    </div>
                    <div class="qr-instructions">
                        <h4>使用微信扫码登录</h4>
                        <ol>
                            <li>打开微信，点击右上角 "+" 号</li>
                            <li>选择 "扫一扫"</li>
                            <li>扫描上方二维码</li>
                            <li>在手机上确认登录</li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="{{ url_for('static', filename='js/auth.js') }}"></script>
    <script>
        // 页面初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 初始化表单切换
            initFormTabs();
            
            // 初始化登录功能
            initLogin();
            
            // 初始化注册功能
            initRegister();
            
            // 初始化密码找回
            initPasswordReset();
            
            // 初始化社交登录
            initSocialLogin();
            
            // 初始化表单验证
            initFormValidation();
        });
    </script>
</body>
</html>